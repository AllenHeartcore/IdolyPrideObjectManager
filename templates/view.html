{% extends "layout.html" %} {% block content %}

<script
    type="text/javascript"
    src="{{ url_for('static', filename='js/view.js') }}"
></script>

<!-- AJAX Interface -->
<!-- Must make these visible to JS even if no json conversion is involved -->
<script>
    let type = "{{ type }}";
    let info = {{ info | tojson }};
</script>

<div class="title">{{ type }} #{{ info.id }}</div>
<div class="subtitle text-monospace">{{ info.name }}</div>

<div id="viewMedia" class="container">
    <div id="loadingSpinnerMedia">
        <div class="spinner-border me-2" role="status"></div>
        Loading media...
    </div>
    <div id="viewMediaContent" class="hide-by-default"></div>
</div>

<div id="viewCaption" class="container">
    <div id="loadingSpinnerCaption">
        <div class="spinner-border me-2" role="status"></div>
        Generating caption...
    </div>
    <div id="viewCaptionText" class="hide-by-default"></div>
</div>

<table id="viewPropertyTable" class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>Property</th>
            <th>Value</th>
        </tr>
        <tr>
            <th>Size</th>
            <td>{{ info.size }}</td>
        </tr>
        {% if info.crc %}
        <tr>
            <th>CRC</th>
            <td>{{ info.crc }}</td>
        </tr>
        {% endif %}
        <tr>
            <th>MD5</th>
            <td>{{ info.md5 }}</td>
        </tr>
        <tr>
            <th>Download Links</th>
            <td id="downloadLinks">
                <a
                    href="https://object.asset.game-gakuen-idolmaster.jp/{{ info.objectName }}"
                    rel="noopener noreferrer"
                    >Raw {{ type }}
                </a>
            </td>
        </tr>
        {% if info.dependencies %}
        <tr>
            <th>Dependencies</th>
            <td class="text-monospace">
                <ul>
                    {% for dep in info.dependencies %}
                    <li>
                        <a href="/view/assetbundle/{{ dep.id }}"
                            >{{ dep.name }}</a
                        >
                    </li>
                    {% endfor %}
                </ul>
            </td>
        </tr>
        {% endif %}
    </thead>
    <tbody></tbody>
</table>

{% endblock %}
